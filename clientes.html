<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clientes - Gerar Boletos</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', sans-serif; }
body { background:#f0f2f5; padding:20px; }
h1 { font-family:'Poppins', sans-serif; color:#1e1e2f; margin-bottom:20px; }
.container { max-width:500px; margin:0 auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.1); }
label { display:block; margin-top:10px; font-weight:bold; }
input { width:100%; padding:8px; margin-top:5px; border:1px solid #ccc; border-radius:6px; }
button { margin-top:15px; padding:10px 15px; background:#1e1e2f; color:#fff; border:none; border-radius:6px; cursor:pointer; }
button:hover { background:#2a2a40; }
</style>
</head>
<body>

<h1>Gerar Boleto</h1>
<div class="container">
  <label>Nome</label>
  <input type="text" id="nome" placeholder="Nome completo do cliente">

  <label>CPF/CNPJ</label>
  <input type="text" id="cpf" placeholder="Somente números">

  <label>Email</label>
  <input type="email" id="email" placeholder="email@exemplo.com">

  <label>Valor do boleto</label>
  <input type="text" id="valor" placeholder="Ex: 1000.00">

  <label>Data de vencimento</label>
  <input type="date" id="vencimento" value="<?php echo date('Y-m-d'); ?>">

  <button id="gerarBoletoBtn">Gerar Boleto</button>
</div>

<script>
const gerarBoletoBtn = document.getElementById('gerarBoletoBtn');

gerarBoletoBtn.onclick = async () => {
  const nome = document.getElementById('nome').value.trim();
  const cpf = document.getElementById('cpf').value.trim();
  const email = document.getElementById('email').value.trim();
  const valor = document.getElementById('valor').value.trim();
  const vencimento = document.getElementById('vencimento').value;

  if(!nome || !cpf || !email || !valor || !vencimento) {
    alert("Preencha todos os campos obrigatórios!");
    return;
  }

  try {
    const res = await fetch("http://localhost:3000/api/gerarBoletos", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        nome, cpf, email,
        boletos: [{ valor, vencimento }]
      })
    });
    const data = await res.json();
    if(data.sucesso) {
      alert("Boleto gerado com sucesso!");
    } else {
      alert("Erro ao gerar boleto: " + JSON.stringify(data.erro));
    }
  } catch(err) {
    alert("Erro ao conectar ao servidor: " + err.message);
  }
};
</script>

</body>
</html>
