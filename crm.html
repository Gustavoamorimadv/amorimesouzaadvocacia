<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>CRM - Estilo AdvBox</title>
  <style>
    body {margin:0;font-family:Arial,sans-serif;background:#fff;color:#333;display:flex;height:100vh;}
    .sidebar {width:220px;background:#2c3e50;color:white;padding:20px;display:flex;flex-direction:column;}
    .sidebar h2 {margin:0 0 20px;}
    .sidebar button {margin:5px 0;padding:10px;background:#34495e;color:white;border:none;cursor:pointer;border-radius:6px;text-align:left;}
    .sidebar button:hover {background:#1abc9c;}

    .main {flex:1;padding:20px;overflow-x:auto;display:flex;gap:20px;}
    .column {flex:1;min-width:250px;background:#f4f6f8;padding:10px;border-radius:8px;}
    .column h3 {text-align:center;}

    .card {background:white;padding:10px;margin:10px 0;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);cursor:pointer;}
    .card h3 {margin:0 0 5px;}
    .meta {font-size:12px;color:#999;}
    .actions {text-align:right;margin-top:5px;}
    .actions button {background:none;border:none;cursor:pointer;font-size:14px;}

    /* Modal */
    .modal {display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);justify-content:center;align-items:center;}
    .modal-content {background:white;padding:20px;border-radius:8px;width:400px;}
    .modal-content h2 {margin-top:0;}
    .modal-content input,.modal-content textarea,.modal-content select {width:100%;margin:5px 0;padding:8px;}
    .modal-content button {margin-top:10px;padding:10px 15px;cursor:pointer;border:none;border-radius:6px;}
    .save-btn {background:#1abc9c;color:white;}
    .close-btn {background:#ccc;}
  </style>
</head>
<body>
  <div class="sidebar">
    <h2>CRM</h2>
    <button onclick="openModal()">‚ûï Cadastrar Cliente</button>
    <button>üìÅ Processos</button>
    <button>üí∞ Financeiro</button>
    <button>‚öôÔ∏è Configura√ß√µes</button>
  </div>

  <div class="main">
    <div class="column" id="novos"><h3>Novos</h3></div>
    <div class="column" id="andamento"><h3>Em Andamento</h3></div>
    <div class="column" id="finalizados"><h3>Finalizados</h3></div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <h2 id="modalTitle">Novo Cliente</h2>
      <input type="text" id="nome" placeholder="Nome">
      <input type="text" id="numeros" placeholder="N√∫meros">
      <input type="text" id="processo" placeholder="N√∫mero do processo">
      <input type="number" id="valor" placeholder="Valor da causa">
      <textarea id="obs" placeholder="Observa√ß√µes"></textarea>
      <select id="status">
        <option value="novos">Novos</option>
        <option value="andamento">Em Andamento</option>
        <option value="finalizados">Finalizados</option>
      </select>
      <button class="save-btn" onclick="saveCliente()">Salvar</button>
      <button class="close-btn" onclick="closeModal()">Cancelar</button>
    </div>
  </div>

  <script>
    let clientes = JSON.parse(localStorage.getItem("clientes")) || [];
    let editId = null;

    function saveToLocalStorage(){
      localStorage.setItem("clientes", JSON.stringify(clientes));
    }

    function openModal(edit=false, cliente=null){
      document.getElementById("modal").style.display="flex";
      if(edit && cliente){
        document.getElementById("modalTitle").innerText="Editar Cliente";
        document.getElementById("nome").value=cliente.nome;
        document.getElementById("numeros").value=cliente.numeros||"";
        document.getElementById("processo").value=cliente.processo||"";
        document.getElementById("valor").value=cliente.valor||"";
        document.getElementById("obs").value=cliente.obs;
        document.getElementById("status").value=cliente.status;
        editId = cliente.id;
      } else {
        document.getElementById("modalTitle").innerText="Novo Cliente";
        document.getElementById("nome").value="";
        document.getElementById("numeros").value="";
        document.getElementById("processo").value="";
        document.getElementById("valor").value="";
        document.getElementById("obs").value="";
        document.getElementById("status").value="novos";
        editId=null;
      }
    }
    function closeModal(){document.getElementById("modal").style.display="none";}

    function saveCliente(){
      const nome=document.getElementById("nome").value;
      const numeros=document.getElementById("numeros").value;
      const processo=document.getElementById("processo").value;
      const valor=document.getElementById("valor").value;
      const obs=document.getElementById("obs").value;
      const status=document.getElementById("status").value;

      if(editId){
        let cli=clientes.find(c=>c.id===editId);
        cli.nome=nome;cli.numeros=numeros;cli.processo=processo;cli.valor=valor;cli.obs=obs;cli.status=status;
      } else {
        const id=Date.now();
        clientes.push({id,nome,numeros,processo,valor,obs,status});
      }
      saveToLocalStorage();
      render();
      closeModal();
    }

    function deleteCliente(id){
      clientes=clientes.filter(c=>c.id!==id);
      saveToLocalStorage();
      render();
    }

    function criarCard(cliente){
      const card=document.createElement("div");
      card.className="card";
      card.dataset.id=cliente.id;
      card.innerHTML=`
        <h3>${cliente.nome}</h3>
        <p><b>N√∫meros:</b> ${cliente.numeros||"-"}</p>
        <p><b>Processo:</b> ${cliente.processo||"-"}</p>
        <p><b>Valor:</b> R$ ${cliente.valor||"-"}</p>
        <p>${cliente.obs||""}</p>
        <div class="meta">#${cliente.id}</div>
        <div class="actions">
          <button class="del">üóë</button>
        </div>`;
      
      // Abrir modal ao clicar no card
      card.addEventListener("click", (e)=>{
        if(e.target.classList.contains("del")) return;
        openModal(true, cliente);
      });

      // Excluir
      card.querySelector(".del").onclick=(ev)=>{
        ev.stopPropagation();
        deleteCliente(cliente.id);
      };

      document.getElementById(cliente.status).appendChild(card);
    }

    function render(){
      document.getElementById("novos").innerHTML="<h3>Novos</h3>";
      document.getElementById("andamento").innerHTML="<h3>Em Andamento</h3>";
      document.getElementById("finalizados").innerHTML="<h3>Finalizados</h3>";
      clientes.forEach(c=>criarCard(c));
    }

    render();
  </script>
</body>
</html>
